<div class="wrapper">
  <div class="loader">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>

<style lang="scss">
  .wrapper {
    --color-bg: #cbb9fc;
    --animation-duration: 2000ms;
    --animation-stagger: 80ms;
    --hue: 360;
    --delay: 0;
    --hex: #f46a6c;
    --size: 6vw;

    background: var(--color-bg);
    padding: 1rem;
    height: 100vh;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;

    position: absolute;

    top: 0;
    bottom: 0;
    left: 0;
    right: 0;

    transition: opacity 200ms;

    z-index: 100;
    .loader {
      display: flex;
      align-content: center;
      justify-content: center;
      max-width: 50vw;

      div {
        margin: 0 2.5%;
        position: relative;
        width: var(--size);
        max-height: 80vh;
        aspect-ratio: 1 / 8;
        animation: infinite syrup-displacement var(--animation-duration) ease;
        animation-delay: var(--delay);
        transform-origin: bottom center;
        z-index: 3;
        border: 1px solid rgba(255, 255, 255, 0.5);
        border-width: 0 2px;

        background: no-repeat bottom 1rem center / 100% 30%
          linear-gradient(
            hsla(var(--hue), 100%, 50%, 50%),
            hsla(var(--hue), 100%, 60%, 50%)
          );
      }

      div:nth-child(1) {
        --hue: 360;
        --hex: #f46a6c;
        --delay: calc(var(--animation-stagger) * 1);
      }

      div:nth-child(2) {
        --hue: 38;
        --hex: #fbad21;
        --delay: calc(var(--animation-stagger) * 2);
      }

      div:nth-child(3) {
        --hue: 48;
        --hex: #f7d445;
        --delay: calc(var(--animation-stagger) * 3);
      }

      div:nth-child(4) {
        --hue: 84;
        --hex: #9bcc50;
        --delay: calc(var(--animation-stagger) * 4);
      }

      div:nth-child(5) {
        --hue: 194;
        --hex: #3ab9de;
        --delay: calc(var(--animation-stagger) * 5);
      }

      div:nth-child(6) {
        --hue: 290;
        --hex: #ac51c0;
        --delay: calc(var(--animation-stagger) * 6);
      }

      div:before {
        --inset: 10%;
        content: "";
        display: block;
        position: absolute;
        top: var(--inset);
        right: var(--inset);
        bottom: 1.5rem;
        left: var(--inset);
        border: 2px solid var(--hex);
        background: var(--hex);
        border-radius: 20% / 2%;
        pointer-events: none;
        opacity: 0.9;
        animation: infinite pop-da-pop var(--animation-duration) ease;
        animation-delay: var(--delay);
        box-shadow:
          inset 0.25rem 0.25rem 0.5rem hsla(40, 100%, 50%, 0.3),
          inset -0.25rem -0.25rem 0.5rem hsla(200, 100%, 50%, 0.15);
      }

      div:after {
        content: "";
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background:
          no-repeat top center / 100% calc(100% - 1rem)
            linear-gradient(
              to right,
              rgba(255, 255, 255, 0.3),
              rgba(255, 255, 255, 0.1) 30%,
              rgba(255, 255, 255, 0.4) 30%,
              rgba(255, 255, 255, 0)
            ),
          no-repeat bottom 1rem center / 100% 2px
            linear-gradient(
              to bottom,
              rgba(255, 255, 255, 0.5),
              rgba(255, 255, 255, 0.5)
            ),
          no-repeat bottom center / 100% 1rem
            linear-gradient(
              to bottom,
              rgba(255, 255, 255, 0.6),
              rgba(255, 255, 255, 0.4)
            );
        clip-path: polygon(
          0 0,
          100% 0,
          100% 100%,
          87.5% 99%,
          75% 100%,
          62.5% 99%,
          50% 100%,
          37.5% 99%,
          25% 100%,
          12.5% 99%,
          0 100%
        );
      }
    }
  }

  @keyframes pop-da-pop {
    0%,
    5%,
    95%,
    100% {
      transform: translateY(0);
    }
    40%,
    60% {
      transform: translateY(-50%);
    }
    50% {
      transform: translateY(-48%);
    }
  }

  @keyframes syrup-displacement {
    0%,
    100% {
      background-size: 100% 30%;
    }
    15%,
    85% {
      background-size: 100% 32%;
    }
    30%,
    70% {
      background-size: 100% 18%;
    }
    50% {
      background-size: 100% 16%;
    }
  }
</style>
